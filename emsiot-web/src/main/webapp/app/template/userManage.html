<nav class="page-title shadow userManage">
    <div class="title-brand flex-between align-items">
        <div class="title-text">用户管理</div>
        <ul class="title-nav flex align-items">
            <li>
                <form class="navbar-form navbar-form-sm navbar-left" ui-shift="prependTo"
                      data-target=".navbar-collapse" role="search">
                    <div class="form-group">
                        <div class="input-group">
                            <input type="text" ng-model="selected"
                                   typeahead="state for state in states | filter:$viewValue | limitTo:8"
                                   class="form-control input-sm bg-light no-border searchInput padder"
                                   placeholder="账户查询">
                                 <span class="input-group-btn">
                                    <button type="submit" class="btn btn-sm bg-light searchInput"><i
                                            class="fa fa-search margin-right"></i></button>
                                </span>
                        </div>
                    </div>
                </form>
            </li>
            <li>
                <a href="">
                    <b class="border-dashed-left"></b>
                    <i class="glyphicon glyphicon-trash"></i>
                    <span>批量删除</span>
                    <b class="border-dashed"></b>
                </a>
            </li>
            <li>
                <a href="" data-toggle="modal" data-target="#addUser">
                    <i class="glyphicon glyphicon-plus"></i>
                    添加用户
                </a>
            </li>
        </ul>
    </div>
</nav>

<!-- 表格操作区域开始 -->
<div class="tableArea countent no-padding shadow">
    <table class="table table-striped table-bordered" id="tableArea" ng-model="Allusers">
        <thead>
        <tr>
            <th>
                <div>
                    <input type="checkbox" ng-checked="isChecked()" ng-click="toggleAll()" class="checkBox">
                    <label for="allSecSon"></label>
                </div>
            </th>
            <th>序号</th>
            <th>管理员ID</th>
            <th>登陆账号</th>
            <th>昵称</th>
            <th>平台昵称</th>
            <th>操作</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="user in Allusers">
            <td>
                <input type="checkbox" ng-checked="exists(user, selected)"
                       ng-click="toggle(user, selected)"/>
            </td>
            <!-- <td>{{user.sysUser.user_id}}</td> -->
            <td>{{$index+1}}</td>
            <td>{{user.sysUser.user_name}}</td>
            <td ng-bind="getAudit(user.sysUser.valid_status)"></td>
            <td>{{user.sysUser.create_time}}</td>
            <td>{{user.sysUser.login_time}}</td>
            <td>
                <button class="delete" ng-click="goDeleteUser(user.sysUser.user_id)"></button>
                <button class="btn btn-primary btn-sm" data-toggle="modal" data-target="#updateUser"
                        ng-click="goUpdateUser(user.sysUser.user_id)">编辑
                </button>
            </td>
        </tr>
        </tbody>
    </table>
    <div class="page">
        <!-- 翻页功能 -->
        <div class="row" style="text-align:center">
            <pagination ng-change="pageChanged()" total-items="bigTotalItems"
                        ng-model="bigCurrentPage" max-size="maxSize" class="pagination-sm"
                        boundary-links="true" rotate="false" num-pages="numPages"></pagination>
        </div>
    </div>
</div>


<!--  添加用户模态框 -->
<div class="modal fade" id="addUser" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close"
                        data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="">
                    添加用户
                </h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" name="userForm">

                    <!--弹框主要内容区域-->
                    <div class="addUserModal">
                        <div class="addUserTitle">请配置用户权限</div>

                        <div class="userModalSwitch flex-between margin-top2">
                            <ul class="flex ">
                                <li>
                                    <button class="btn btn-white" type="button">
                                        <i class="glyphicon glyphicon-search"></i>
                                        查询权限
                                        <div class="swichWrap">
                                            <div class="btnCircle"></div>
                                        </div>
                                    </button>
                                </li>
                                <li>
                                    <button class="btn btn-white margin-left-md" type="button">
                                        <i class="glyphicon glyphicon-edit"></i>
                                        操作权限
                                        <div class="swichWrap">
                                            <div class="btnCircle"></div>
                                        </div>
                                    </button>
                                </li>
                            </ul>


                            <div class="form-group flex" id="userAreaSelect">
                                <label for="" class="control-label">
                                    <i>*</i>
                                    地区：
                                </label>


                                <select id="" class="form-control" ng-model="addProvinceID" ng-disabled="editable"
                                        ng-change="getCitis()"
                                        ng-options="x.province_id as x.name for x in provinces"></select>
                                <select id="" class="form-control" ng-model="addCityID" ng-disabled="editable"
                                        ng-change="getAreas(addCityID)"
                                        ng-options="x.city_id as x.name for x in citis"></select>
                                <select id="" class="form-control" ng-model="addAreaID" ng-disabled="editable"
                                        ng-options="x.area_id as x.name for x in areas"></select>


                                <!--<button class="btn btn-white margin-left-md" type="button">-->
                                <!--<i class="glyphicon glyphicon-map-marker"></i>-->
                                <!--请选择地区-->
                                <!--<i class="glyphicon glyphicon-triangle-bottom"></i>-->
                                <!--</button>-->
                            </div>
                        </div>

                        <!--监控台权限管理开始-->
                        <nav class="page-title">
                            <div class="title-brand flex-between align-items">
                                <div class="title-text">
                                    <img src="app/img/config-home.png" alt=""/>
                                    <span>监控台</span>
                                </div>
                            </div>
                            <div class="search-container">
                                <button class="btn btn-white" type="button">
                                    注册车辆--添加
                                    <i class="glyphicon glyphicon-ok btn-ok"></i>
                                </button>
                                <button class="btn btn-white" type="button">
                                    报警车辆--查看
                                    <i class="glyphicon glyphicon-ok btn-ok"></i>
                                </button>
                                <button class="btn btn-white" type="button">
                                    报警车辆--查看
                                    <i class="glyphicon glyphicon-ok btn-ok"></i>
                                </button>
                            </div>
                        </nav>
                        <!--监控台权限管理结束-->

                        <!--车辆管理开始-->
                        <nav class="page-title">
                            <div class="title-brand flex-between align-items inputParent">
                                <div class="title-text">
                                    <img src="app/img/config-car.png" alt=""/>
                                    <span>车辆管理</span>
                                </div>
                                <ul class="title-nav flex align-items">
                                    <li class="tabs">
                                        <input type="radio" id="tab1" name="tab-control" checked>
                                        <input type="radio" id="tab2" name="tab-control">
                                        <ul>
                                            <li title="车辆备案登记">
                                                <label for="tab1" role="">
                                                    <span>车辆备案登记</span>
                                                </label>
                                            </li>
                                            <li title="车辆报警">
                                                <label for="tab2" role="">
                                                    <span>车辆报警</span>
                                                </label>
                                            </li>
                                        </ul>

                                        <div class="slider">
                                            <div class="indicator"></div>
                                        </div>

                                    </li>
                                </ul>
                            </div>

                            <ul class="search-container" id="content">
                                <li class="tab1-car">
                                    <button class="btn btn-white" type="button">
                                        注册车辆--添加
                                        <i class="glyphicon glyphicon-ok btn-ok"></i>
                                    </button>
                                    <button class="btn btn-white" type="button">
                                        注册车辆--查看
                                        <i class="glyphicon glyphicon-ok btn-ok"></i>
                                    </button>
                                    <button class="btn btn-white" type="button">
                                        注册车辆--查看
                                        <i class="glyphicon glyphicon-ok btn-ok"></i>
                                    </button>
                                    <button class="btn btn-white" type="button">
                                        注册车辆--添加
                                        <i class="glyphicon glyphicon-ok btn-ok"></i>
                                    </button>
                                    <button class="btn btn-white" type="button">
                                        注册车辆--查看
                                        <i class="glyphicon glyphicon-ok btn-ok"></i>
                                    </button>
                                    <button class="btn btn-white" type="button">
                                        注册车辆--查看
                                        <i class="glyphicon glyphicon-ok btn-ok"></i>
                                    </button>
                                </li>

                                <li class="tab2-car">
                                    <button class="btn btn-white" type="button">
                                        报警车辆--添加
                                        <i class="glyphicon glyphicon-ok btn-ok"></i>
                                    </button>
                                    <button class="btn btn-white" type="button">
                                        报警车辆--查看
                                        <i class="glyphicon glyphicon-ok btn-ok"></i>
                                    </button>
                                    <button class="btn btn-white" type="button">
                                        报警车辆--查看
                                        <i class="glyphicon glyphicon-ok btn-ok"></i>
                                    </button>
                                    <button class="btn btn-white" type="button">
                                        报警车辆--添加
                                        <i class="glyphicon glyphicon-ok btn-ok"></i>
                                    </button>
                                    <button class="btn btn-white" type="button">
                                        报警车辆--查看
                                        <i class="glyphicon glyphicon-ok btn-ok"></i>
                                    </button>
                                    <button class="btn btn-white" type="button">
                                        报警车辆--查看
                                        <i class="glyphicon glyphicon-ok btn-ok"></i>
                                    </button>

                                </li>
                            </ul>


                        </nav>
                        <!--车辆管理开始结束-->

                        <div class="divider-line"></div>

                        <div class="addUserTitle margin-top2 margin-bottom2">请配置账户信息</div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group ">
                                    <label for="" class="control-label col-md-4">
                                        <i>*</i>
                                        登陆账户：
                                    </label>

                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="">
                                        <em style="text-align: right;" ng-show="">
                                            <i color="red">登陆账户不能空！</i>
                                        </em>
                                    </div>
                                </div>
                            </div>


                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="" class="col-sm-4 control-label">
                                        <i>*</i>
                                        平台昵称：
                                    </label>

                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" ng-model="username" name="username"
                                               ng-remote-validate="/i/user/checkUserName" ng-remote-method="GET">
                                        <em style="text-align: right;"
                                            ng-show="userForm.username.$error.ngRemoteValidate">
                                            <i color="red">平台昵称不能为空</i>
                                        </em>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group ">
                                    <label for="" class="control-label col-md-4">
                                        <i>*</i>
                                        昵称：
                                    </label>

                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="">
                                        <em style="text-align: right;" ng-show="">
                                            <i color="red">昵称不能空！</i>
                                        </em>
                                    </div>
                                </div>
                            </div>


                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="" class="col-sm-4 control-label">
                                        <i>*</i>
                                        密码：
                                    </label>

                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" ng-model="username" name="username"
                                               ng-remote-validate="/i/user/checkUserName" ng-remote-method="GET">
                                        <em style="text-align: right;"
                                            ng-show="userForm.username.$error.ngRemoteValidate">
                                            <i color="red">密码不能为空</i>
                                        </em>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>


                </form>
            </div>
            <div class="modal-footer">
                <button type="button" ng-click="submit()" class="btn btn-primary">
                    提交
                </button>
                <button type="button" class="btn btn-default"
                        data-dismiss="modal">取消
                </button>

            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal -->
</div>
<!--  添加用户模态框 end -->


<!--  编辑用户模态框 -->
<div class="modal fade" id="updateUser" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close"
                        data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="myModalLabel">
                    编辑用户
                </h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" name="uuserForm">
                    <div class="form-group">
                        <label for="firstname" class="col-sm-2 control-label"><font color="red">*</font>用户名</label>

                        <div class="col-sm-10">
                            <input type="text" class="form-control" ng-model="userForUpdate.user_name" name="uusername"
                                   placeholder="请输入名字" ng-remote-validate="/i/user/checkUserName"
                                   ng-remote-method="GET">
                            <em style="text-align: right;" ng-show="uuserForm.uusername.$error.ngRemoteValidate"><font
                                    color="red">该用户已存在</font></em>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="phoneNum" class="col-sm-2 control-label">手机号</label>

                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="phoneNum" name="phoneNum"
                                   ng-model="userForUpdate.user_tel"
                                   placeholder="请输入手机号">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="company" class="col-sm-2 control-label">工作单位</label>

                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="companyid" name="company"
                                   ng-model="userForUpdate.company"
                                   placeholder="请输入工作单位">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="project" class="col-sm-2 control-label">所属项目</label>

                        <div class="col-sm-10">
                            <select id="" class="form-control" style="height:35px;width:100px !important"
                                    ng-model="userForUpdate.pro_id" ng-disabled="editable"
                                    ng-change="updateProjectSelected(userForUpdate.proid)"
                                    ng-options="x.pro_id as x.pro_name for x in projects"></select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="compfactory" class="col-sm-2 control-label">所属构件厂</label>

                        <div class="col-sm-10">
                            <select id="" class="form-control" style="height:35px;width:100px !important"
                                    ng-model="userForUpdate.comp_factory_id" ng-disabled="editable"
                                    ng-change="updateCompFactorySelected(userForUpdate.comp_factory_id)"
                                    ng-options="x.comp_factory_id as x.comp_factory_name for x in compfactorys"></select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="role" class="col-sm-2 control-label">角色</label>

                        <div class="col-sm-10">
                            <select id="" class="form-control" style="height:35px;width:100px !important"
                                    ng-model="userForUpdate.user_role_id" ng-disabled="editable"
                                    ng-change="updateUserRoleSelected(userForUpdate.user_role_id)"
                                    ng-options="x.user_role_id as x.user_role_name for x in userRoles"></select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="role" class="col-sm-2 control-label">是否有效</label>

                        <div class="col-sm-10">
                            <input type="checkbox" ng-model="validforupdate">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default"
                        data-dismiss="modal">取消
                </button>
                <button type="button" ng-click="update()" class="btn btn-primary">
                    更新
                </button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal -->
</div>
<!--  编辑用户模态框 end -->